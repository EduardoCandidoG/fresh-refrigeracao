<!DOCTYPE html>
<html>
    <head>
        <title>Fresh - Clientes</title>
    </head>
    <body>

        <h2>Cadastrar Cliente</h2>

        <input id="nome" placeholder="Nome"><br>
        <input id="telefone" placeholder="Telefone"><br>
        <input id="email" placeholder="Email"><br>
        <input id="endereco" placeholder="EndereÃ§o"><br>
        <button onclick="cadastrar()">Cadastrar</button>

        <h2>Lista de Clientes</h2>
        <ul id="lista"></ul>

        <script>
            function cadastrar() {
                const cliente = {
                    nome: document.getElementById("nome").value,
                    telefone: document.getElementById("telefone").value,
                    email: document.getElementById("email").value,
                    endereco: document.getElementById("endereco").value
                };

                fetch("http://localhost:8080/clientes", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(cliente)
                })
                        .then(() => listar());
            }

            function listar() {
                fetch("http://localhost:8080/clientes")
                        .then(res => res.json())
                    .then(data => {
                        const lista = document.getElementById("lista");
                        lista.innerHTML = "";
                        data.forEach(cliente => {
                            lista.innerHTML += `<li>${cliente.nome} - ${cliente.telefone}</li>`;
                        });
                    });
            }

            listar();
        </script>

    </body>
</html>
